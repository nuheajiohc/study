# 날짜 차이 계산법

## 처음 시도한 뺄셈연산

두 날짜의 기간을 구하기 위해서 아래와 같이 SQL문을 실행하였다. 
```sql
SELECT DATE("2024-11-07") - DATE("2024-11-03");
```
결과는 4로 기대값이 나오게 되었다.

## 뺄셈연산으로 기간을 구할 수 있는 것이 맞을까?

아래 SQL문도 실행해보았다.
```sql
SELECT DATE("2024-11-07") - DATE("2023-11-07");
```
기대값은 366이지만 실제 결과는 10000이 나왔다.

그 이유는 날짜에서 하이픈 기호를 제거하고 실제 뺄셈 연산이 진행되기 떄문이다.  
즉, 20241107-20231107이로 변환되어 10000이 나오는 것이다.
> MySQL은 DATE 타입의 뺄셈 연산에서 날짜를 YYYYMMDD 형식의 숫자로 변환해 계산

## 두 날짜의 차이를 올바르게 구하는 방법
두 날짜 간의 정확한 일 수 차이를 계산하려면 DATEDIFF 함수를 사용해야한다.
```sql
SELECT DATEDIFF(DATE("2024-11-07"), DATE("2023-11-07"));
```

DATEDIFF함수를 사용하면 기대값 366을 얻을 수 있다.


## 또다른 잘못된 시도
문자열에서 하이픈으로 구분된 날짜를 직접 빼려고 하면 예상치 못한 결과가 나온다.
```sql
SELECT "2024-11-07"-"2024-11-01";
```
위 sql문의 결과는 0이 나왔다.  
MySQL은 연산을 위해 문자열을 숫자로 변환하려 시도하지만, 하이픈 때문에 변환이 되지 않아서 두 값이 모두 기본값 0으로 간주된다.

```sql
SELECT "2024"-"2021";
```
이 sql의 결과는 3이 나온다.  
왜냐하면 뺄셈 연산 때문에 mysql 내부적으로 문자열을 숫자로 변환하기 떄문이다.


## 기간을 구할 때는 DATEDIFF를 사용하면 된다!
``` mysql
 SELECT DATEDIFF(END_DATE, START_DATE);
```

