
## 외부 설정 하는 방법
- OS 환경 변수 : OS에서 지원하는 외부 설정, 해당 OS를 사용하는 모든 프로세스에서 사용
- 자바 시스템 속성 : 자바에서 지원하는 외부 설정, 해당 JVM 안에서 사용
- 자바 커멘드 라인 인수 : 커멘드 라인에서 전달하는 외부 설정, 실행 시 `main(args)` 메서드에서 사용
- 외부 파일(설정 데이터) : 프로그램에서 외부 파일을 읽어서 사용


### OS 환경 변수

환경 변수 조회 방법 - MAC
터미널에서는 printenv 명령어를 실행하면 키=값의 형태로 설정값들이 출력된다.

애플리케이션에서 OS 환경 변수를 읽는 방법

```java
import java.util.Map;
import lombok.extern.slf4j.Slf4j;

@Slf4j
public class OsEnv {

  public static void main(String[] args) {
    Map<String, String> envMap = System.getenv();
    for (String key : envMap.keySet()) {
        log.info("env {}={}", key, envMap.get(key));
    }
  }
}
```
- `System.getenv()`를 사용하면 전체 OS 환경변수를 조회할 수 있다.
- OS는 시스템이고 시스템에 있는 환경변수를 조회한다고 생각하면 된다.
- 시스템 환경변수는 키값쌍으로 되어 있기 때문에 Map으로 조회한다.

인텔리제이에서 시스템 환경변수 추가 시키는법
![systemenv](./외부설정 이미지/systemenv.png)
빨간 네모 칸에서 키=값 형태로 입력하면 추가가 된다.  
해당 칸이 존재하지 않으면 초록색 버튼을 눌러 Environment Variables 를 클릭한다.

OS환경변수는 이 프로그램 뿐만 아니라 다른 프로그램에서도 사용할 수 있다.  
특정 프로그램 안에서만 외부 설정을 사용하는 방법을 알아보자

### 자바 시스템 속성
자바 시스템 속성은 실행한 JVM 안에서 접근 가능한 외부 설정이다.


```java
import java.util.Properties;
import lombok.extern.slf4j.Slf4j;

@Slf4j
public class JavaSystemProperties {

  public static void main(String[] args) {
    Properties properties = System.getProperties();
    for (Object key : properties.keySet()) {
      log.info("prop {}={}", key,
          System.getProperty(String.valueOf(key)));
    }
  }
}
```

자바 시스템 속성에 설정값 추가하는 방법
- java -Dcustomurl-customvalue -jar app.jar
- `-D` VM 옵션을 통해서 `key=value` 형식을 주면 된다.  
![javaenv.png](%EC%99%B8%EB%B6%80%EC%84%A4%EC%A0%95%20%EC%9D%B4%EB%AF%B8%EC%A7%80/javaenv.png)
빨간 네모 칸에 `-Dkey=value 형식으로 속성을 추가한다. 없다면 초록 네모칸을 눌러서 Add VM options를 클릭해 추가한다.

`-D` 는 Define의 약자로 예상된다 

**자바 시스템 속성을 자바 코드로 설정하기**
자바시스템속성은앞서본것처럼 `-D` 옵션을통해실행시점에전달하는것도가능하고,다음과같이자바코드내부 에서 추가하는 것도 가능하다. 코드에서 추가하면 이후에 조회시에 값을 조회할 수 있다.
설정: `System.setProperty(propertyName, "propertyValue")` 조회: `System.getProperty(propertyName)`
참고로 이 방식은 코드 안에서 사용하는 것이기 때문에 외부로 설정을 분리하는 효과는 없다.

애플리케이션이 종료되면 사라짐


## 커맨드 라인 인수

`java -jar app.jar dataA dataB` 방식으로 외부 설정 값 전달
필요한 데이터를 마지막 위치에 스페이스로 구분해서 전달하면 된다. 이 경우 `dataA`, `dataB` 2개의 문자가 `args`에 전달 됨

```java
import lombok.extern.slf4j.Slf4j;

@Slf4j
public class CommandLineV1 {

  public static void main(String[] args) {
    for (String arg : args) {
      log.info("arg {}", arg);
    }
  }
}
```

인텔리제이에서 실행 시 커맨드 라인 인수 추가
![commandline1.png](%EC%99%B8%EB%B6%80%EC%84%A4%EC%A0%95%20%EC%9D%B4%EB%AF%B8%EC%A7%80/commandline1.png)
- 여기에 `dataA dataB` 를 입력하고 실행하자. 
- 커맨드 라인 인수는 공백(space)으로 구분한다.
- 커맨드 라인 인수로 설정 값을 전달받을 경우는 키값쌍으로 전달되는 것이 아니라 스페이스 바를 기준으로 통 문자가 전달된다.
- 실제 에플리케이션 개발할 떄는 키값쌍의 형식을 자주 사용하는데 이 때 커맨드 라인 인수를 사용하면 직접 파싱해야 하기에 번거움이 있다.

## 커맨드 라인 옵션 인수
커맨드 라인 인수는 키값쌍으로 설정값을 사용하고 싶을 때 직접 파싱해야 하는 번거로움 있는데 스프링부트에서는 키값 형식으로 편리하게 사용할 수 있게 표준 방식을 정의 해뒀다.

스프링은 커맨드 라인에 `-`(dash) 2개(`--`)를 연결해서
```java

```